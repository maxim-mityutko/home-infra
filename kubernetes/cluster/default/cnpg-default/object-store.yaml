apiVersion: barmancloud.cnpg.io/v1
kind: ObjectStore
metadata:
  name: cnpg-default-barman
spec:
  retentionPolicy: 7d
  instanceSidecarConfiguration:
    retentionPolicyIntervalSeconds: 21600 # 6 hours
    resources:
      requests:
        memory: 100Mi
        cpu: 100m
      limits:
        memory: 500Mi
        cpu: 2
  configuration:
    destinationPath: s3://cnpg-backup/
    endpointURL: http://minio.minio.svc.cluster.local
    s3Credentials:
      accessKeyId:
        name: cnpg-default-secret
        key: username
      secretAccessKey:
        name: cnpg-default-secret
        key: password
    data:
      compression: bzip2
    wal:
      compression: bzip2
