---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: gpu
resources:
  - https://raw.githubusercontent.com/intel/intel-device-plugins-for-kubernetes/refs/tags/v0.32.0/deployments/nfd/
  - https://raw.githubusercontent.com/intel/intel-device-plugins-for-kubernetes/refs/tags/v0.32.0/deployments/nfd/overlays/node-feature-rules/
  - https://raw.githubusercontent.com/intel/helm-charts/refs/tags/intel-device-plugins-operator-0.32.0/charts/device-plugin-operator/crds/deviceplugin.intel.com_gpudeviceplugins.yaml
helmCharts:
  - name: intel-device-plugins-operator
    namespace: gpu
    releaseName: intel-device-plugins-operator
    version: 0.32.0
    repo: https://intel.github.io/helm-charts
    valuesInline:
      manager:
        devices:
          gpu: true
      nodeSelector:
        kubernetes.io/arch: amd64
      resources:
      limits:
        cpu: 100m
        memory: 120Mi
      requests:
        cpu: 100m
        memory: 100Mi
  - name: intel-device-plugins-gpu
    namespace: gpu
    releaseName: intel-device-plugins-gpu
    version: 0.32.0
    repo: https://intel.github.io/helm-charts/
    valuesInline:
      nodeSelector:
        # intel.feature.node.kubernetes.io/gpu: 'true'
        kubernetes.io/gpu: intel
