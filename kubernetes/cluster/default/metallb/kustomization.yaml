apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources: 
  - ip-pool.yaml
helmCharts:
  - name: metallb
    namespace: metallb-system
    releaseName: metallb
    version: 0.14.9
    repo: https://metallb.github.io/metallb
    valuesInline:
      rbac:
        create: true
      controller:
        enabled: true
        logLevel: info
        nodeSelector:
          node.kubernetes.io/microk8s-controlplane: microk8s-controlplane
        tolerations:
          - key: "node.kubernetes.io/unschedulable"
            operator: Exists
        livenessProbe:
          enabled: true
          initialDelaySeconds: 10
          periodSeconds: 60
        readinessProbe:
          enabled: true
          initialDelaySeconds: 10
          periodSeconds: 60
      speaker:
        enabled: true
        tolerations:
          - key: "node.kubernetes.io/unschedulable"
            operator: Exists
        # nodeSelector:
        #   node.kubernetes.io/microk8s-controlplane: microk8s-controlplane
        frr:
          enabled: false
        livenessProbe:
          enabled: true
          initialDelaySeconds: 10
          periodSeconds: 60
        readinessProbe:
          enabled: true
          initialDelaySeconds: 10
          periodSeconds: 60
      crds:
        enabled: true
      frrk8s:
        enabled: false