apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: default
helmCharts:
  - name: redis
    namespace: default
    releaseName: redis
    version: 22.0.4
    repo: oci://registry-1.docker.io/bitnamicharts
    valuesInline:
      global:
        security:
          # Required for non-Bitnami images
          allowInsecureImages: true
      image:
        registry: public.ecr.aws
        repository: docker/library/redis
        tag: 8.2.1
      auth:
        enabled: false
      architecture: standalone
      master:
        revisionHistoryLimit: 1
        updateStrategy:
          type: RollingUpdate
        resources:
          requests:
            cpu: 50m
            memory: 50Mi
          limits:
            cpu: 200m
            memory: 200Mi
        startupProbe:
          enabled: false
        livenessProbe:
          enabled: true
          initialDelaySeconds: 20
          periodSeconds: 10
        readinessProbe:
          enabled: true
          initialDelaySeconds: 20
          periodSeconds: 10
        persistence:
          enabled: false
