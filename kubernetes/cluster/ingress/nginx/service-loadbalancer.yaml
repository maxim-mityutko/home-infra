---
# Ref: https://kubernetes.github.io/ingress-nginx/user-guide/exposing-tcp-udp-services/
apiVersion: v1
kind: Service
metadata:
  name: nginx-ingress-proxy
  namespace: ingress
  annotations:
    # Using `dummy` address pool to prevent this from grabbing address from MetalLB
    metallb.io/address-pool: dummy
spec:
  type: LoadBalancer
  allocateLoadBalancerNodePorts: false
  externalIPs:
    - 192.168.1.211
    - 192.168.1.212
    - 192.168.1.213
  ports:
    - targetPort: 53
      name: dns-tcp
      port: 53
      protocol: TCP
    - targetPort: 53
      name: dns-udp
      port: 53
      protocol: UDP
  selector:
    name: nginx-ingress-microk8s
