apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: machine-learning
resources:
  - dns-endpoint.yaml
  - open-webui.yaml
# Ref: https://github.com/open-webui/helm-charts/blob/open-webui-8.12.2/charts/open-webui/README.md
helmCharts:
  - name: open-webui
    namespace: machine-learning
    releaseName: open-webui
    version: 8.12.2
    repo: https://helm.openwebui.com/
    valuesInline:
      ollama:
        enabled: false
      pipelines:
        enabled: false
      tika:
        enabled: false
      # ollamaUrls:
      #   - https://ollama.com
      enableOpenaiApi: false
      extraEnvFrom:
        - configMapRef:
            name: open-webui
        - secretRef:
            name: open-webui
      websocket:
        enabled: false
      redis-cluster:
        enabled: false
      ingress:
        enabled: true
        class: public
        annotations:
          kubernetes.io/ingress.class: public
          cert-manager.io/cluster-issuer: lets-encrypt
        host: oi.brhd.io
      persistence:
        enabled: false
      serviceAccount:
        enable: true
      livenessProbe: {}
      readinessProbe: {}
      resources: {}
      podSecurityContext: {}
      revisionHistoryLimit: 3
      sso:
        enabled: false
        oidc:
          enabled: false
      nodeSelector:
        kubernetes.io/arch: amd64
