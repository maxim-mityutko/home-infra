apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: monitoring
resources:
  - _namespace.yaml
  - rule-oom.yaml
  - scrape-argocd.yaml # VM Service Scrape
  - scrape-nginx-ingress.yaml # Microk8s Nginx Ingress Scrape
  - secret.yaml
helmCharts:
    - name: frigate
      namespace: smart-home
      releaseName: frigate
      version: 7.0.1
      repo: https://blakeblackshear.github.io/blakeshome-charts/
      valuesInline:
        coral:
          enabled: false
        envFromSecrets: []
        gpu:
          nvidia:
            enabled: true
        ingress:
          enabled: true
          annotations:
            kubernetes.io/ingress.class: public
            cert-manager.io/cluster-issuer: lets-encrypt
          hosts:
            - host: grafana.brhd.io
        nodeSelector:
          nvidia.com/gpu.present: "true"
        shmSize: 1Gi
        persistence:
          data:
            enabled: true